# 利用手順書（Getting Started）

Web版 Claude Code の初回セットアップから基本操作までを説明します。

---

## 目次

- [1. 環境構築](#1-環境構築)
  - [1.1 前提条件](#11-前提条件)
  - [1.2 リポジトリのクローン](#12-リポジトリのクローン)
  - [1.3 環境変数の設定](#13-環境変数の設定)
  - [1.4 サービスの起動](#14-サービスの起動)
  - [1.5 起動確認](#15-起動確認)
- [2. 初回セットアップ](#2-初回セットアップ)
  - [2.1 ユーザー登録](#21-ユーザー登録)
  - [2.2 ログイン](#22-ログイン)
- [3. プロジェクト作成](#3-プロジェクト作成)
  - [3.1 新規プロジェクト作成](#31-新規プロジェクト作成)
  - [3.2 APIキーの設定](#32-apiキーの設定)
- [4. 基本操作](#4-基本操作)
  - [4.1 チャットの開始](#41-チャットの開始)
  - [4.2 メッセージの送信](#42-メッセージの送信)
  - [4.3 ファイル操作](#43-ファイル操作)
  - [4.4 VSCode Webの利用](#44-vscode-webの利用)
- [5. プロジェクト設定](#5-プロジェクト設定)
  - [5.1 MCPサーバーの追加](#51-mcpサーバーの追加)
  - [5.2 カスタムエージェントの作成](#52-カスタムエージェントの作成)
  - [5.3 コマンドの登録](#53-コマンドの登録)
- [6. セッション管理](#6-セッション管理)
  - [6.1 セッションの切り替え](#61-セッションの切り替え)
  - [6.2 セッションの再開](#62-セッションの再開)
- [7. トラブルシューティング](#7-トラブルシューティング)

---

## 1. 環境構築

### 1.1 前提条件

以下のソフトウェアがインストールされていることを確認してください。

| ソフトウェア | バージョン | 確認コマンド |
|-------------|-----------|-------------|
| Docker | 24.0+ | `docker --version` |
| Docker Compose | 2.x | `docker compose version` |
| Git | 任意 | `git --version` |

**システム要件:**

| 項目 | 推奨 |
|------|------|
| メモリ | 8GB以上 |
| ディスク | 10GB以上の空き容量 |
| OS | macOS, Linux, Windows (WSL2) |

### 1.2 リポジトリのクローン

```bash
git clone <repository-url>
cd AGENTSDK
```

![リポジトリのクローン](images/setup-01-clone.png)
<!-- キャプチャ: ターミナルでgit cloneを実行した画面 -->

### 1.3 環境変数の設定

```bash
# テンプレートをコピー
cp .env.example .env

# シークレットキーを生成（Linuxの場合）
openssl rand -hex 32

# .envファイルを編集してSECRET_KEYを設定
```

`.env`ファイルの主要な設定項目：

| 項目 | 説明 | 例 |
|------|------|-----|
| SECRET_KEY | セキュリティキー（32文字以上） | `a1b2c3d4...` |
| FRONTEND_PORT | フロントエンドポート | `3000` |
| BACKEND_PORT | バックエンドポート | `8000` |

> **重要**: APIキーは環境変数ではなく、Web UIのプロジェクト設定から登録します。

![環境変数の設定](images/setup-02-env.png)
<!-- キャプチャ: .envファイルをエディタで開いた画面 -->

### 1.4 サービスの起動

```bash
# 標準構成で起動
make up

# または直接Docker Composeを使用
docker-compose up -d
```

初回起動時はDockerイメージのビルドに数分かかります。

![サービスの起動](images/setup-03-startup.png)
<!-- キャプチャ: make up実行中のターミナル画面 -->

### 1.5 起動確認

```bash
# サービス状態を確認
make status

# または
docker-compose ps
```

全てのサービスが `running` になっていることを確認します。

| サービス | ポート | 状態 |
|----------|--------|------|
| frontend | 3000 | running |
| backend | 8000 | running |
| mysql | 3306 | running |
| code-server | 8080 | running |

![起動確認](images/setup-04-status.png)
<!-- キャプチャ: docker-compose ps の結果画面 -->

---

## 2. 初回セットアップ

### 2.1 ユーザー登録

1. ブラウザで http://localhost:3000 にアクセス
2. 「新規登録」をクリック
3. 必要情報を入力
   - メールアドレス
   - パスワード（8文字以上）
   - 表示名（任意）
4. 「登録」ボタンをクリック

![ユーザー登録画面](images/auth-01-register.png)
<!-- キャプチャ: ユーザー登録フォーム画面 -->

### 2.2 ログイン

1. 登録したメールアドレスとパスワードを入力
2. 「ログイン」ボタンをクリック
3. ダッシュボードが表示されます

![ログイン画面](images/auth-02-login.png)
<!-- キャプチャ: ログインフォーム画面 -->

![ダッシュボード](images/auth-03-dashboard.png)
<!-- キャプチャ: ログイン後のダッシュボード画面 -->

---

## 3. プロジェクト作成

### 3.1 新規プロジェクト作成

1. サイドバーの「+」ボタンをクリック
2. プロジェクト名を入力
3. 説明（任意）を入力
4. 「作成」ボタンをクリック

![新規プロジェクト作成](images/project-01-create.png)
<!-- キャプチャ: プロジェクト作成モーダル画面 -->

プロジェクトが作成されると、自動的にワークスペースディレクトリが生成されます。

```
workspace/
└── {project-id}/
    ├── .claude/           # Claude設定
    └── (ユーザーファイル)
```

![プロジェクト作成完了](images/project-02-created.png)
<!-- キャプチャ: プロジェクト作成完了後の画面 -->

### 3.2 APIキーの設定

プロジェクトでClaudeを利用するには、APIキーの設定が必要です。

1. プロジェクト設定（歯車アイコン）をクリック
2. 「APIキー」タブを選択
3. Anthropic APIキーを入力
4. 「保存」ボタンをクリック

![APIキー設定画面](images/project-03-apikey.png)
<!-- キャプチャ: プロジェクト設定のAPIキータブ -->

> **Note**: APIキーは [Anthropic Console](https://console.anthropic.com/) で取得できます。

![APIキー設定完了](images/project-04-apikey-saved.png)
<!-- キャプチャ: APIキー保存完了のトースト表示 -->

---

## 4. 基本操作

### 4.1 チャットの開始

1. プロジェクトを選択
2. 「新しいセッション」をクリック
3. チャット画面が表示されます

![チャット画面](images/chat-01-new-session.png)
<!-- キャプチャ: 新しいセッションのチャット画面 -->

### 4.2 メッセージの送信

1. 下部の入力エリアにメッセージを入力
2. Enter キーまたは送信ボタンをクリック
3. AIからの応答がストリーミング表示されます

```
例: 「Hello World を表示するPythonスクリプトを作成してください」
```

![メッセージ送信](images/chat-02-send-message.png)
<!-- キャプチャ: メッセージを入力した状態の画面 -->

![AI応答](images/chat-03-response.png)
<!-- キャプチャ: AIからの応答が表示されている画面 -->

### 4.3 ファイル操作

AIはファイル操作ツールを使用して、自動的にファイルを作成・編集します。

| ツール | 機能 | 表示 |
|--------|------|------|
| Read | ファイル読み込み | ファイル内容がコードブロックで表示 |
| Write | ファイル作成/上書き | 作成されたファイルパスが表示 |
| Edit | ファイル編集 | 変更差分が表示 |
| Bash | コマンド実行 | 実行結果が表示 |

![ファイル操作](images/chat-04-file-operation.png)
<!-- キャプチャ: AIがファイルを作成している様子 -->

### 4.4 VSCode Webの利用

1. 右パネルの「VSCode」タブをクリック
2. ブラウザ内でVSCodeが起動
3. ファイルの編集、検索、ターミナル操作が可能

![VSCode Web](images/chat-05-vscode.png)
<!-- キャプチャ: VSCode Webが表示されている画面 -->

**操作方法:**

| 操作 | ショートカット |
|------|---------------|
| ファイル検索 | `Ctrl+P` |
| 全体検索 | `Ctrl+Shift+F` |
| ターミナル | `Ctrl+`` |
| 保存 | `Ctrl+S` |

---

## 5. プロジェクト設定

### 5.1 MCPサーバーの追加

MCPサーバーを追加すると、外部ツール（Slack, GitHub等）と連携できます。

1. プロジェクト設定を開く
2. 「MCP」タブを選択
3. 「追加」ボタンをクリック
4. サーバー情報を入力
   - 名前: `slack`
   - コマンド: `npx`
   - 引数: `["slack-mcp-server"]`
   - 環境変数: `{"SLACK_TOKEN": "xoxb-..."}`
5. 「保存」をクリック

![MCP設定画面](images/settings-01-mcp.png)
<!-- キャプチャ: MCP設定タブの画面 -->

![MCP追加モーダル](images/settings-02-mcp-add.png)
<!-- キャプチャ: MCPサーバー追加モーダル -->

### 5.2 カスタムエージェントの作成

専門分野に特化したAIアシスタントを作成できます。

1. 「エージェント」タブを選択
2. 「新規作成」をクリック
3. エージェント情報を入力
   - 名前: `Laravel Expert`
   - カテゴリ: `development`
   - モデル: `sonnet`
   - システムプロンプト: （専門知識を記述）
4. 「保存」をクリック

![エージェント設定](images/settings-03-agent.png)
<!-- キャプチャ: エージェント設定タブの画面 -->

![エージェント作成](images/settings-04-agent-create.png)
<!-- キャプチャ: エージェント作成モーダル -->

### 5.3 コマンドの登録

よく使う操作をコマンドとして登録できます。

1. 「コマンド」タブを選択
2. 「新規作成」をクリック
3. コマンド情報を入力
   - 名前: `analyze`
   - 説明: `コード分析を実行`
   - 内容: （プロンプトを記述）
4. 「保存」をクリック

チャットで `/analyze` と入力すると、登録したコマンドが実行されます。

![コマンド設定](images/settings-05-command.png)
<!-- キャプチャ: コマンド設定タブの画面 -->

---

## 6. セッション管理

### 6.1 セッションの切り替え

1. サイドバーのセッション一覧から選択
2. または「新しいセッション」で新規作成

![セッション一覧](images/session-01-list.png)
<!-- キャプチャ: サイドバーのセッション一覧 -->

### 6.2 セッションの再開

ブラウザを閉じても、セッションのコンテキストは保持されます。

1. プロジェクトを選択
2. 以前のセッションを選択
3. 会話の続きから再開可能

![セッション再開](images/session-02-resume.png)
<!-- キャプチャ: 以前のセッションを選択した画面 -->

---

## 7. トラブルシューティング

### サービスが起動しない

```bash
# ログを確認
make logs

# 特定サービスのログ
docker-compose logs backend
docker-compose logs frontend
```

![ログ確認](images/trouble-01-logs.png)
<!-- キャプチャ: ログ確認コマンドの実行結果 -->

### APIキーエラー

| エラー | 原因 | 対処 |
|--------|------|------|
| `API key not set` | APIキー未設定 | プロジェクト設定でAPIキーを登録 |
| `Invalid API key` | APIキーが無効 | 正しいAPIキーを再入力 |
| `Rate limit exceeded` | レート制限 | しばらく待ってから再試行 |

### 接続エラー

| エラー | 原因 | 対処 |
|--------|------|------|
| `Connection refused` | サービス未起動 | `make up` でサービス起動 |
| `WebSocket error` | 接続切断 | ページをリロード |

### データベースエラー

```bash
# MySQLログを確認
docker-compose logs mysql

# MySQLに接続
docker-compose exec mysql mysql -uclaude -p
```

---

## 次のステップ

- [ユーザーガイド](user-guide.md) - 全機能の詳細説明
- [バックエンド設計書](backend-design.md) - API仕様
- [フロントエンド設計書](frontend-design.md) - UI実装詳細

---

## 改訂履歴

| バージョン | 日付 | 変更内容 |
|-----------|------|----------|
| 1.0.0 | 2025-01 | 初版作成 |
