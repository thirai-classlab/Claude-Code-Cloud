# AI アシスタント 共通指示書

このファイルは、AI アシスタント（GitHub Copilot, Claude Code, Cursor等）に対するプロジェクト全体の基本的な指示を記述するものです。

## 1. 指示書の全体像と優先順位

### 1.1. 参照する指示書ファイル群

* **AI 共通指示書:** このファイル (`.ai/instructions/main.md`) - **優先度: 普通**
* **AI 個別指示書:** `.ai/instructions/` フォルダ内の機能別指示書 - **優先度: 高**
    * `coding.md` - コーディングルール（Python/TypeScript/React/テスト）
    * `document-generation.md` - ドキュメント生成ルール（Mermaid必須）
    * `code-generation.md` / `commit-message.md` / `review.md` / `test.md`
* **設計書:** `doc/` ディレクトリ

### 1.2. 指示書の優先順位

指示内容が競合する場合、以下の優先順位に従ってください。

1.  **プロンプトファイル:** `.ai/prompts/` 内のタスク指示書
2.  **個別の指示書:** `.ai/instructions/` 内の機能別指示書
3.  **全体の指示書:** このファイル (`.ai/instructions/main.md`)

## 2. 開発の全体手順

1.  **設計書の確認:** `doc/` フォルダ内の設計書を確認
2.  **実装:** プロンプトファイルに基づいてコードを生成・修正
3.  **テスト:** ユニットテスト、結合テストなどを記述・実行
4.  **レビューとリファクタリング:** コードを確認し、技術的負債がないか検討
5.  **コミット:** テストとレビューが完了したコードをコミット

## 3. AI アシスタントの動作ルール

* **不明点の確認:** 指示内容やコンテキストが不明確な場合は、必ず質問してください。
* **ライブラリ/関数の使用:** 検証されていないライブラリや関数は使用しないでください。
* **パス/モジュールの確認:** ファイルパスやモジュール名を参照する前に、実際に存在することを確認してください。
* **既存コードの扱い:** 明示的に指示されていない限り、既存のコードを削除・上書きしないでください。

## 4. 個別指示書への参照

以下の詳細ルールは個別の指示書を参照してください：

| カテゴリ | 参照先 | 概要 |
|----------|--------|------|
| コーディングルール | `coding.md` | Python/TypeScript/React固有のルール、テストルール |
| ドキュメント生成ルール | `document-generation.md` | Mermaid必須、設計書テンプレート |
| コード生成 | `code-generation.md` | コード生成時の詳細指示 |
| コミットメッセージ | `commit-message.md` | コミットメッセージのフォーマット |
| レビュー | `review.md` | コードレビューの観点 |
| テスト | `test.md` | テスト作成の詳細指示 |

## 5. セキュリティ

* 機密情報を含むファイル（`.env` 等）は `.gitignore` に追加し、リポジトリで管理しない
* AI が提案したコードは必ず開発者が検証し、脆弱性がないか確認

## 6. 作業に関する重要な注意点

* **不明点の確認:** 作業開始前に不明点は必ず質問
* **重要判断の承認:** アーキテクチャや仕様に関わる判断は報告し承認を得る
* **未指示変更の禁止:** 明示的に指示されていない変更は行わない
* **技術スタック/UI/UX の変更禁止:** 許可なく変更しない
